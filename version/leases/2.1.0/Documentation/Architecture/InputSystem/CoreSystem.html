<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Core System | Mixed Reality Toolkit Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Core System | Mixed Reality Toolkit Documentation ">
    <meta name="generator" content="docfx 2.45.1.0">
    
    <link rel="shortcut icon" href="../../../Documentation/Images/favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../Documentation/Images/mrt_logo_icon.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="core-system">Core System</h1>

<p>At the heart of the input system is the <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit.Services/InputSystem/MixedRealityInputSystem.cs">MixedRealityInputSystem</a>,
which is a service that is responsible for initializing and operating all of the input related
functionality associated with the MRTK.</p>
<div class="NOTE">
<h5>Note</h5>
<p>It is assumed that readers have already read and have a basic understanding of the
<a href="Terminology.html">terminology</a> section.</p>
</div>
<p>This service is responsible for:</p>
<ul>
<li>Reading the <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit/Definitions/InputSystem/MixedRealityInputSystemProfile.cs">input system profile</a></li>
<li>Starting the various device managers (for example, <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit.Providers/OpenVR/OpenVRDeviceManager.cs">OpenVR</a>,
<a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit.Providers/WindowsMixedReality/WindowsMixedRealityDeviceManager.cs">Windows Mixed Reality</a>,
<a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit/Providers/UnityInput/UnityTouchDeviceManager.cs">Unity Touch</a>).
The set of device managers that are instantiated is configured by the input system profile.</li>
<li>Instantiation of the <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit.Services/InputSystem/GazeProvider.cs">GazeProvider</a>,
which is a component that is responsible for providing HoloLens1-style head gaze information
in addition to HoloLens2-style eye gaze information.</li>
<li>Instantiation of the <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit.Services/InputSystem/FocusProvider.cs">FocusProvider</a>,
which is a component that is responsible for determining objects that have focus. This
is described in more depth in the <a href="ControllersPointersAndFocus.html#pointers-and-focus">pointers and focus</a> section of the
documentation.</li>
<li>Providing registration points for all input events (as <a href="#global-listeners">global listeners</a>).</li>
<li>Providing event dispatch capabilities for those input events.</li>
</ul>
<h2 id="input-events">Input events</h2>
<p>Input events are generally fired on two different channels:</p>
<h3 id="objects-in-focus">Objects in focus</h3>
<p>Events can be sent directly to a GameObject that has focus. For example, an object might
have a script that implements <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit/Interfaces/InputSystem/Handlers/IMixedRealityHandTrackHandler.cs"><code>IMixedRealityTouchHandler</code></a>.
This object would get touch events when focused by a hand that is near it. These types of
events go &quot;up&quot; the GameObject hierarchy until it finds a GameObject that is capable of handling
the event.</p>
<p>This is done by using <a href="https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.ExecuteHierarchy.html">ExecuteHierarchy</a>
in <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit.Services/InputSystem/MixedRealityInputSystem.cs#L471">DispatchEventToObjectFocusedByPointer</a>.</p>
<h3 id="global-listeners">Global listeners</h3>
<p>Events can be sent to global listeners. It's possible to register for all input events by using
the input system's <a class="xref" href="../../../api/Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.html"><code>IMixedRealityEventSystem</code></a>
interface. It's recommended to use the <a class="xref" href="../../../api/Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.html#Microsoft_MixedReality_Toolkit_IMixedRealityEventSystem_RegisterHandler__1_IEventSystemHandler_">RegisterHandler</a>
method for registering for global events - the deprecated <code>Register</code> function will cause listeners
to get notified of ALL input events, rather than just input events of a particular type
(where type is defined by the event interface).</p>
<p>Note that <a class="xref" href="../../../api/Microsoft.MixedReality.Toolkit.Input.MixedRealityInputSystem.html#Microsoft_MixedReality_Toolkit_Input_MixedRealityInputSystem_PushFallbackInputHandler_GameObject_">fallback listeners</a>
are another type of global listeners which are also discouraged because they will receive
every single input event that hasn't been handled elsewhere in the scene.</p>
<h3 id="order-of-event-dispatch">Order of event dispatch</h3>
<p>Generally, events are sent to listeners in the following way. Note that if any of the steps below mark
the event as <a href="https://docs.unity3d.com/ScriptReference/EventSystems.AbstractEventData-used.html">handled</a>,
the event dispatch process stops.</p>
<ol>
<li>Event is sent to global listeners.</li>
<li>Event is sent to modal dialogs of the focused object.</li>
<li>Event is sent to the focused object.</li>
<li>Event is sent to fallback listeners.</li>
</ol>
<h2 id="device-managers--data-providers">Device Managers / Data Providers</h2>
<p>These entities are responsible for interfacing with lower-level APIs (such as Windows Mixed Reality APIs,
or OpenVR APIs) and translating data from those systems into ones that fit the MRTK's higher
level input abstractions. They are responsible for detecting, creating, and managing the lifetime of
<a href="ControllersPointersAndFocus.html#controllers">controllers</a>.</p>
<p>The basic flow of a device manager involves:</p>
<ol>
<li>The device manager is instantiated by the input system service.</li>
<li>The device manager registers with its underlying system (for example, the Windows Mixed Reality
device manager will register for <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Assets/MixedRealityToolkit.Providers/WindowsMixedReality/WindowsMixedRealityDeviceManager.cs#L651">gesture and interaction events</a>).</li>
<li>It creates controllers that it discovers from the underlying system (for example
the provider could detect the presence of articulated hands)</li>
<li>In its Update() loop, call UpdateController() to poll for the new state of the underlying system
and update its controller representation.</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Documentation/Architecture/InputSystem/CoreSystem.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
