<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Object manipulator | Mixed Reality Toolkit Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Object manipulator | Mixed Reality Toolkit Documentation ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href=".././Documentation/Images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src=".././Documentation/Images/mrt_logo_icon.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="object-manipulator">Object manipulator</h1>

<p><img src="Images/ManipulationHandler/MRTK_Manipulation_Main.png" alt="Object manipulator"></p>
<p>The <em>ObjectManipulator</em> is the new component for manipulation behaviour, previously found in <em>ManipulationHandler</em>. The object manipulator makes a number of improvements and simplifications. This component is a replacement for the manipulation handler, which will be deprecated.</p>
<p>The <em>ObjectManipulator</em> script makes an object movable, scalable, and rotatable using one or two hands. The object manipulator can be configured to control how the object will respond to various inputs. The script should work with most forms of interaction, such as HoloLens 2 articulated hand, HoloLens 2 hand rays, HoloLens 1 gaze and gestures and immersive headset motion controller input.</p>
<h2 id="how-to-use-the-object-manipulator">How to use the object manipulator</h2>
<p>To use the object manipulator, first add the <code>ObjectManipulator</code> script component to a GameObject. Make sure to also add a collider to the object, matching its grabbable bounds.</p>
<p>To make the object respond to near articulated hand input, add the <code>NearInteractionGrabbable</code> script as well.</p>
<p>Physics behaviour can be enabled for the object manipulator by adding a rigidbody component to the object. Physics behaviour enabled by adding this component is discussed in greater detail in <a href="#physics-and-collisions"><em>Physics and collisions</em></a>.</p>
<p>As well as this, manipulation can be constrained by adding <a href="#transform-constraints">manipulation constraint components</a> to the object. These are special components that work with manipulation and change the manipulation behaviour in some way.</p>
<p><img src="Images/ObjectManipulator/MRTK_ObjectManipulator_Howto.png" alt="Manipulation Handler"></p>
<h2 id="inspector-properties-and-fields">Inspector properties and fields</h2>
<img src="Images/ObjectManipulator/MRTK_ObjectManipulator_Structure.png" width="450">
<h3 id="general-properties">General properties</h3>
<h4 id="host-transform">Host transform</h4>
<p>The object transform that will be manipulated. Defaults to the object of the component.</p>
<h4 id="manipulation-type">Manipulation type</h4>
<p>Specifies whether the object can be manipulated using one hand or two hands. Because this property is a flag, both options can be selected.</p>
<ul>
<li><em>One handed</em>: Enables one handed manipulation if selected.</li>
<li><em>Two handed</em>: Enables two handed manipulation if selected.</li>
</ul>
<h4 id="allow-far-manipulation">Allow far manipulation</h4>
<p>Specifies whether manipulation can be done using far interaction with pointers.</p>
<h3 id="one-handed-manipulation-properties">One handed manipulation properties</h3>
<h4 id="one-hand-rotation-mode-near">One hand rotation mode near</h4>
<p>Specifies how the object will behave when it is being grabbed with one hand near. These options only work for articulated hands.</p>
<ul>
<li><em>Rotate about object center</em>: Object rotates using rotation of the hand, but about the object center point. The object will appear to move less as it rotates, but there may be a feeling of disconnection between the hand and the object. More useful for far interaction.</li>
<li><em>Rotate about grab point</em>: Rotate object with the hand about the grab point between the thumb and index finger. It should feel as if the object is being held by the hand.</li>
</ul>
<h4 id="one-hand-rotation-mode-far">One hand rotation mode far</h4>
<p>Specifies how the object will behave when it is being grabbed with one hand at distance. These options only work for articulated hands.</p>
<ul>
<li><em>Rotate about object center</em>: Rotate object using rotation of the hand, but about the object center point. Useful for inspecting at a distance without the object center moving as the object rotates.</li>
<li><em>Rotate about grab point</em>: Rotate object using rotation of the hand, but about the pointer ray hit point. Useful for inspection.</li>
</ul>
<h3 id="two-handed-manipulation-properties">Two handed manipulation properties</h3>
<h4 id="two-handed-manipulation-type">Two handed manipulation type</h4>
<p>Specifies how two hand manipulation can transform an object. Because this property is a flag, any number of options can be selected.</p>
<ul>
<li><em>Move</em>: Moving is allowed if selected.</li>
<li><em>Scale</em>: Scaling is allowed if selected.</li>
<li><em>Rotate</em>: Rotation is allowed if selected.</li>
</ul>
<p><img src="Images/ManipulationHandler/MRTK_ManipulationHandler_TwoHanded.jpg" alt="Manipulation Handler"></p>
<h3 id="constraints">Constraints</h3>
<h4 id="add-constraint">Add constraint</h4>
<p>This button allows a constraint component to be added directly from the object manipulator inspector. All constraints in a project should be visible here. See <a href="#transform-constraints">transform constraints</a> for more info.</p>
<h4 id="go-to-component">Go to component</h4>
<p>All constraints found on the object wil be listed here with a <em>Go to component</em> button. This button will cause the inspector to scroll to the selected constraint component so that it can be configured.</p>
<h3 id="physics">Physics</h3>
<h4 id="release-behavior">Release behavior</h4>
<p>Specify which physical properties a manipulated object should keep upon release. Requires a rigidbody component to be on that object. Because this property is a flag, both options can be selected.</p>
<ul>
<li><em>Keep Velocity</em>: When the object is released, if this option is selected it will keep its linear velocity.</li>
<li><em>Keep Angular Velocity</em>: When the object is released, if this option is selected it will keep its angular velocity.</li>
</ul>
<h3 id="smoothing">Smoothing</h3>
<h4 id="smoothing-active">Smoothing active</h4>
<p>Specifies whether smoothing is active.</p>
<h4 id="move-lerp-time">Move lerp time</h4>
<p>Amount of smoothing to apply to the movement. Smoothing of 0 means no smoothing. Max value means no change to value.</p>
<h4 id="rotate-lerp-time">Rotate lerp time</h4>
<p>Amount of smoothing to apply to the rotation. Smoothing of 0 means no smoothing. Max value means no change to value.</p>
<h4 id="scale-lerp-time">Scale lerp time</h4>
<p>Amount of smoothing to apply to the scale. Smoothing of 0 means no smoothing. Max value means no change to value.</p>
<h3 id="manipulation-events">Manipulation events</h3>
<p>Manipulation handler provides the following events:</p>
<ul>
<li><em>OnManipulationStarted</em>: Fired when manipulation starts.</li>
<li><em>OnManipulationEnded</em>: Fires when the manipulation ends.</li>
<li><em>OnHoverStarted</em>: Fires when a hand / controller hovers the manipulatable, near or far.</li>
<li><em>OnHoverEnded</em>: Fires when a hand / controller un-hovers the manipulatable, near or far.</li>
</ul>
<p>The event fire order for manipulation is:</p>
<p><em>OnHoverStarted</em> -&gt; <em>OnManipulationStarted</em> -&gt; <em>OnManipulationEnded</em> -&gt; <em>OnHoverEnded</em></p>
<p>If there is no manipulation, you will still get hover events with the following fire order:</p>
<p><em>OnHoverStarted</em> -&gt; <em>OnHoverEnded</em></p>
<h2 id="transform-constraints">Transform constraints</h2>
<p>Constraints can be used to limit manipulation in some way. For example, some applications may require rotation, but also require that the object remain upright. In this case, a <code>RotationAxisConstraint</code> can be added to the object and used to limit rotation to y-axis rotation. MRTK provides a number of constraints, all of which are described below.</p>
<p>It is also possible to define new constraints and use them to create unique manipulation behaviour that may be needed for some applications. To do this, create a script that inherits from <a class="xref" href="../api/Microsoft.MixedReality.Toolkit.UI.TransformConstraint.html"><code>TransformConstraint</code></a> and implement the abstract <code>ConstraintType</code> property and the abstract <code>ApplyConstraint</code> method. Upon adding a new constraint to the object, it should constrain manipulation in the way that was defined. This new constraint should also show in the object manipulator <a href="#constraints">constraint fields</a>.</p>
<p>All of the constraints provided by MRTK share the following properties:</p>
<h4 id="target-transform">Target Transform</h4>
<p>Transform of the manipulated object being constrained. This should be the same as the ObjectManipulator <a href="#host-transform"><em>Host transform</em></a>. Defaults to the object of the component.</p>
<h4 id="hand-type">Hand Type</h4>
<p>Specifies whether the constraint is used for one handed, two handed or both kinds of manipulation. Because this property is a flag, both options can be selected.</p>
<ul>
<li><em>One handed</em>: Constraint will be used during one handed manipulation if selected.</li>
<li><em>Two handed</em>: Constraint will be used during two handed manipulation if selected.</li>
</ul>
<h4 id="proximity-type">Proximity Type</h4>
<p>Specifies whether the constraint is used for near, far or both kinds of manipulation. Because this property is a flag, both options can be selected.</p>
<ul>
<li><em>Near</em>: Constraint will be used during near manipulation if selected.</li>
<li><em>Far</em>: Constraint will be used during far manipulation if selected.</li>
</ul>
<h3 id="faceuserconstraint">FaceUserConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_FaceUser.gif" width="400">
<p>When this constraint is attached to an object, rotation will be limited so that object will always face the user. This is useful for slates or panels. The properties for <code>FaceUserConstraint</code> are as follows:</p>
<h4 id="face-away">Face away</h4>
<p>Object faces away from the user if true.</p>
<h3 id="fixeddistanceconstraint">FixedDistanceConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_FixedDistance.gif" width="400">
<p>This constraint fixes the distance between the manipulated object and another object transform on manipulation start. This is useful for behaviour such as fixing the distance from the manipulated object to the head transform. The properties for <code>FixedDistanceConstraint</code> are as follows:</p>
<h4 id="constraint-transform">Constraint transform</h4>
<p>This is the other transform that the manipulated object will have a fixed distance to. Defaults to the camera transform.</p>
<h3 id="fixedrotationtouserconstraint">FixedRotationToUserConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_FixedRotationToUser.gif" width="400">
<p>This constraint fixes the relative rotation between the user and the manipulated object while it is being manipulated. This is useful for slates or panels as it ensures that the manipulated object always shows the same face to the user as it did at the start of manipulation. The <code>FixedRotationToUserConstraint</code> does not have any unique properties.</p>
<h3 id="fixedrotationtoworldconstraint">FixedRotationToWorldConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_FixedRotationToWorld.gif" width="400">
<p>This constraint fixes the global rotation of the manipulated object while it is being manipulated. This can be useful in cases where no rotation should be imparted by manipulation. The <code>FixedRotationToWorldConstraint</code> does not have any unique properties:</p>
<h3 id="maintainapparentsizeconstraint">MaintainApparentSizeConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_MaintainApparentSize.gif" width="400">
<p>When this constraint is attached to an object, no matter how far the object is from the user, it will maintain the same apparent size to the user (i.e. it will take up the same proportion of the user's field of view). This can be used to ensure that a slate or text panel remains readable while manipulating. The <code>MaintainApparentSizeConstraint</code> does not have any unique properties:</p>
<h3 id="moveaxisconstraint">MoveAxisConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_MoveAxis.gif" width="400">
<p>This constraint can be used to fix along which axes a manipulated object can be moved. This can be useful for manipulating objects over the surface of a plane, or along a line. The properties for <code>MoveAxisConstraint</code> are as follows:</p>
<h4 id="constraint-on-movement">Constraint on movement</h4>
<p>Specifies which axes to prevent movement on. By default these axes will be global rather than local, but this can be changed below. Because this property is a flag, any number of options can be selected.</p>
<ul>
<li><em>X Axis</em>: Movement along the x-axis is constrained if selected.</li>
<li><em>Y Axis</em>: Movement along the y-axis is constrained if selected.</li>
<li><em>Z Axis</em>: Movement along the z-axis is constrained if selected.</li>
</ul>
<h4 id="use-local-space-for-constraint">Use local space for constraint</h4>
<p>Will constrain relative the manipulated object's local transform axes if true. False by default.</p>
<h3 id="rotationaxisconstraint">RotationAxisConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_RotationAxis.gif" width="400">
<p>This constraint can be used to fix about which axes a manipulated object can be rotated. This can be useful for keeping a manipulated object upright, but still allowing y-axis rotations, for example. The properties for <code>RotationAxisConstraint</code> are as follows:</p>
<h4 id="constraint-on-rotation">Constraint on rotation</h4>
<p>Specifies which axes to prevent rotation about. By default these axes will be global rather than local, but this can be changed below. Because this property is a flag, any number of options can be selected.</p>
<ul>
<li><em>Y Axis</em>: Rotation about the y-axis is constrained if selected.</li>
<li><em>Z Axis</em>: Rotation about the z-axis is constrained if selected.</li>
<li><em>X Axis</em>: Rotation about the x-axis is constrained if selected.</li>
</ul>
<h4 id="use-local-space-for-constraint-1">Use local space for constraint</h4>
<p>Will constrain relative the manipulated object's local transform axes if true. False by default.</p>
<h3 id="minmaxscaleconstraint">MinMaxScaleConstraint</h3>
<img src="Images/ObjectManipulator/MRTK_Constraint_MinMaxScale.gif" width="400">
<p>This constraint allows minimum and maximum values to be set for the scale of the manipulated object. This is useful for preventing users from scaling an object too small or too large. The properties for <code>MinMaxScaleConstraint</code> are as follows:</p>
<h4 id="scale-minimum">Scale minimum</h4>
<p>The minimum scale value during manipulation.</p>
<h4 id="scale-maximum">Scale maximum</h4>
<p>The maximum scale value during manipulation.</p>
<h4 id="relative-to-initial-state">Relative to initial state</h4>
<p>If true, the values above will be interpreted as relative to the objects initial scale. Otherwise they will be interpreted as absolute scale values.</p>
<h2 id="physics-and-collisions">Physics and collisions</h2>
<p>Physics behaviour can be enabled by adding a rigidbody component to the same object as an object manipulator. Not only does this enable configuration of <a href="#release-behavior">release behaviour</a> above, it also enables collisions. Without a rigidbody component, collisions don't behave correctly during manipulation:</p>
<ul>
<li>Collisions between a manipulated object and a static collider (i.e. an object with a collider but no rigidbody) do not work, the manipulated object passes straight through the static collider unaffected.</li>
<li>Collisions between a manipulated object and a rigidbody (i.e an object with both a collider and a rigidbody) cause the rigidbody to have a collision response, but the response is jumpy and unnatural. There is also no collision response on the manipulated object.</li>
</ul>
<p>When a rigidbody is added, collisions should work correctly.</p>
<h3 id="without-rigidbody">Without rigidbody</h3>
<img src="Images/ObjectManipulator/MRTK_PhysicsManipulation_NoRigidbody.gif" width="500">
<h3 id="with-rigidbody">With rigidbody</h3>
<img src="Images/ObjectManipulator/MRTK_PhysicsManipulation_Rigidbody.gif" width="500">
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Documentation/README_ObjectManipulator.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
