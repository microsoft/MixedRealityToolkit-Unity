<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How to configure Oculus Quest in MRTK using the XRSDK pipeline | Mixed Reality Toolkit Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="How to configure Oculus Quest in MRTK using the XRSDK pipeline | Mixed Reality Toolkit Documentation ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href="../.././Documentation/Images/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-177859076-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-177859076-1');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../.././Documentation/Images/mrt_logo_icon.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="how-to-configure-oculus-quest-in-mrtk-using-the-xrsdk-pipeline">How to configure Oculus Quest in MRTK using the XRSDK pipeline</h1>

<p>A <a href="https://www.oculus.com/quest/">Oculus Quest</a> is required.</p>
<p>MRTK's support for the Oculus Quest comes via two different sources, Unity's XR pipeline and the Oculus Integration Unity package. The <strong>Oculus XRSDK Data Provider</strong> enables the use
of both sources and must be used to use MRTK on the Oculus Quest.</p>
<p>The <a href="https://docs.unity3d.com/Manual/XR.html">Unity's XR Pipeline</a> enables the use of Oculus Touch controllers and head tracking with the Oculus Quest.
This pipeline is the standard for developing XR applications in Unity 2019.3 and beyond. To use this pipeline, make sure that you using <strong>Unity 2019.3 or newer</strong>.</p>
<p>The <a href="https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022">Oculus Integration Unity package</a> allows for the use of <strong>hand tracking</strong> with the Oculus Quest.
This data provider does <strong>NOT</strong> use Unity's <strong>XR Pipeline</strong> or <strong>Legacy XR Pipeline</strong>, but because controllers and headtracking are handeled by the Unity's XR Pipeline, the steps in
<strong>Setting up project for the Oculus Quest</strong> must be followed to ensure that you are using the <strong>XR Pipeline</strong> and not the to-be-deprecated <strong>Legacy XR Pipeline</strong>.</p>
<h2 id="setting-up-project-for-the-oculus-quest">Setting up project for the Oculus Quest</h2>
<ol>
<li><p>Follow <a href="https://developer.oculus.com/documentation/unity/book-unity-gsg/">these steps</a> to ensure that your project is ready to deploy on Oculus Quest.</p>
</li>
<li><p>Ensure that <a href="https://developer.oculus.com/documentation/native/android/mobile-device-setup/">developer mode</a> is enabled on your device. Installing the Oculus ADB Drivers is optional.</p>
</li>
</ol>
<h2 id="setting-up-the-xr-pipeline-for-oculus-quest">Setting up the XR Pipeline for Oculus Quest</h2>
<ol>
<li><p>Ensure that the <strong>Oculus XR Plugin</strong> is installed under <strong>Window --&gt; Package Manager</strong></p>
<p><img src="../Images/CrossPlatform/OculusQuest/OculusXRPluginPackage.png" alt="OculusXRPluginPackage"></p>
</li>
<li><p>Make sure that the Oculus Plug-in Provider is included in your project by going to <strong>Edit --&gt; Project Settings --&gt; XR Plug-in Management --&gt; Plug-in Providers</strong></p>
<p><img src="../Images/CrossPlatform/OculusQuest/OculusPluginProvider.png" alt="OculusPluginProvider"></p>
</li>
</ol>
<h2 id="setting-up-the-oculus-integration-unity-package-to-enable-handtracking">Setting up the Oculus Integration Unity package to enable handtracking</h2>
<ol>
<li><p>Download and import <a href="https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022">Oculus Integration</a> from the Unity Asset Store. The latest version tested to
work is 20.0.0. Older versions can be found from this <a href="https://developer.oculus.com/downloads/package/unity-integration-archive/">archive</a></p>
</li>
<li><p>Navigate to Mixed Reality Toolkit &gt; Utilities &gt; Oculus &gt; Integrate Oculus Integration Unity Modules and run it. Doing this will update the asmdefs with definitions and references needed for the
relevant Oculus Quest code to function. Additionally, it should populate the <strong>Prefab reference</strong> fields of the <strong>DefaultOculusXRSDKDeviceManagerProfile</strong> if they are unfilled.
It will also update the csc file to filter out the obsolete warnings produced by the Oculus Integration assets. The MRTK repo contains a csc file that converts warnings to errors, this conversion halts the MRTK-Quest configuration process.</p>
<p><img src="../Images/CrossPlatform/OculusQuest/OculusIntegrationAsmdef.png" alt="OculusIntegrationAsmdef"></p>
</li>
<li><p>After the modules have been integrated, navigate to Mixed Reality Toolkit &gt; Utilities &gt; Oculus &gt; Initialize Oculus Project Config and run it. This will modify a scriptable object called OculusProjectConfig (It should be found at Assets/Oculus).
In that config file, you should see the HandTrackingSupport field set to &quot;Controllers and Hands&quot; and the Requires System Keyboard field checked off. This will enable handtracking and keyboard input on the Quest.</p>
<p><img src="../Images/CrossPlatform/OculusQuest/OculusIntegrationConfig.png" alt="OculusIntegrationControllerAndHands">
<img src="../Images/CrossPlatform/OculusQuest/OculusIntegrationConfigSettings.png" alt="OculusIntegrationControllerAndHands"></p>
</li>
</ol>
<h2 id="setting-up-the-scene">Setting up the scene</h2>
<ol>
<li>Create a new Unity scene or open a pre-existing scene like HandInteractionExamples</li>
<li>Add MRTK to the scene by navigating to <strong>Mixed Reality Toolkit</strong> &gt; <strong>Add to Scene and Configure</strong></li>
</ol>
<h2 id="using-the-oculus-xrsdk-data-provider">Using the Oculus XRSDK Data Provider</h2>
<ol>
<li>Configure your profile to use the <strong>Oculus XRSDK Data Provider</strong>
<ul>
<li><p>If not intending to modify the configuration profiles</p>
<ul>
<li>Change your profile to DefaultXRSDKInputSystemProfile and go to <a href="OculusQuestMRTK.html#build-and-deploy-your-project-to-oculus-quest">Build and deploy your project to Oculus Quest</a></li>
</ul>
</li>
<li><p>Otherwise follow the following:</p>
<ul>
<li>Select the MixedRealityToolkit game object in the hierarchy and select <strong>Copy and Customize</strong> to clone the default mixed reality profile.</li>
</ul>
<p><img src="../Images/CrossPlatform/CloneProfile.png" alt="CloneProfile"></p>
<ul>
<li>Select the <strong>Input</strong> Configuration Profile</li>
</ul>
<p><img src="../Images/CrossPlatform/InputConfigurationProfile.png" alt="InputConfigurationProfile"></p>
<ul>
<li>Select <strong>Clone</strong> in the input system profile to enable modification.</li>
</ul>
<p><img src="../Images/CrossPlatform/CloneInputSystemProfile.png" alt="CloneInputSystemProfile"></p>
<ul>
<li>Open the <strong>Input Data Providers</strong> section, select <strong>Add Data Provider</strong> at the top, and new data provider will be added at the end of the list.  Open the new data provider and set the <strong>Type</strong> to <strong>Microsoft.MixedReality.Toolkit.XRSDK.Oculus &gt; OculusXRSDKDeviceManager</strong>. Set the <strong>Device Manager Profile</strong> to <strong>DefaultOculusXRSDKDeviceManagerProfile</strong> or a custom cloned profile.</li>
</ul>
<p><img src="../Images/CrossPlatform/OculusQuest/OculusAddDataXRSDKProvider.png" alt="OculusAddXRSDKDataProvider"></p>
</li>
<li><p>You can verify that the Oculus Controllers are detected by</p>
</li>
</ul>
</li>
</ol>
<h2 id="build-and-deploy-your-project-to-oculus-quest">Build and deploy your project to Oculus Quest</h2>
<ol>
<li><p>Plug in your Oculus Quest via a USB 3.0 -&gt; USB C cable</p>
</li>
<li><p>Navigate to <strong>File &gt; Build Settings</strong></p>
</li>
<li><p>Change the deployment to <strong>Android</strong></p>
</li>
<li><p>Ensure that the Oculus Quest is selected as the applicable run device</p>
<p><img src="../Images/CrossPlatform/OculusQuest/OculusRunDevice.png" alt="OculusRunDevice"></p>
</li>
<li><p>Select Build and Run</p>
<ul>
<li>You will likely encounter the following set of build errors when you select <em>Build and Run</em> the first time. You should be able to successfully deploy upon selecting <em>Build and Run</em> again.</li>
</ul>
<p><img src="../Images/CrossPlatform/OculusQuest/OculusExpectedBuildErrors.png" alt="OculusExpectedBuildErrors"></p>
</li>
<li><p>Accept the <em>Allow USB Debugging</em> prompt from inside the quest</p>
</li>
<li><p>See your scene inside the Oculus Quest</p>
</li>
</ol>
<h2 id="removing-oculus-integration-from-the-project">Removing Oculus Integration from the Project</h2>
<ol>
<li>Navigate to the Mixed Reality Toolkit &gt; Oculus &gt; Separate Oculus Integration Unity Modules
<img src="../Images/CrossPlatform/OculusQuest/OculusSeparationAsmdef.png" alt="OculusSeparationAsmdef"></li>
<li>Let Unity refresh as references in the Microsoft.MixedReality.Toolkit.Providers.Oculus.asmdef and other files are modified in this step</li>
<li>Close Unity</li>
<li>Close Visual Studio, if it's open</li>
<li>Open File Explorer and navigate to the root of the MRTK Unity project</li>
<li>Delete the UnityProjectName/Library directory</li>
<li>Delete the UnityProjectName/Assets/Oculus directory</li>
<li>Delete the UnityProjectName/Assets/Oculus.meta file</li>
<li>Reopen Unity</li>
</ol>
<h2 id="common-errors">Common errors</h2>
<h3 id="quest-not-recognized-by-unity">Quest not recognized by Unity</h3>
<p>Make sure your Android paths are properly configured. If you continue to encounter problems, follow this <a href="https://developer.oculus.com/documentation/unity/book-unity-gsg/#install-android-tools">guide</a></p>
<p><strong>Edit &gt; Preferences &gt; External Tools &gt; Android</strong></p>
<p><img src="../Images/CrossPlatform/OculusQuest/AndroidToolsConfig.png" alt="AndroidToolsConfig"></p>
<h3 id="the-ovrcamerarigprefab-of-oculusxrsdkdevicemanagerprofile-has-not-been-assigned">The ovrCameraRigPrefab of OculusXRSDKDeviceManagerProfile has not been assigned.</h3>
<p>If you encounter an error that looks like this</p>
<p><strong>UnassignedReferenceException: The variable ovrCameraRigPrefab of OculusXRSDKDeviceManagerProfile has not been assigned. You probably need to assign the ovrCameraRigPrefab variable of the OculusXRSDKDeviceManagerProfile script in the inspector.</strong></p>
<p>Then the project is not fully integrated with the Oculus Unity Modules. Navigate to Mixed Reality Toolkit &gt; Utilities &gt; Oculus &gt; Integrate Oculus Integration Unity Modules and run it.
Doing so populate the <strong>Prefab reference</strong> fields of the <strong>OculusXRSDKDeviceManagerProfile</strong>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Documentation/CrossPlatform/OculusQuestMRTK.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
