# Copyright (c) Microsoft Corporation.
# Licensed under the MIT License.

# Build for PR validation

variables:
- template: Config/settings.yaml

resources:
  repositories:
  - repository: PipelineTools
    type: git
    endpoint: ToolsAccess
    name: tools.internal
    ref: 78ecf591964ecf511b4c7a0cd84d98ce11e8be16
  - repository: DocToolUnityProject
    type: git
    endpoint: ToolsAccess
    name: lib.doctools
    ref: f6dcb5efd248fbe486757cb5a7198aed81c180d5

trigger: none # disable CI

jobs:
- job: UnityValidation
  pool: Unity_2021.3.3f1_Pool
  steps:
  - checkout: self
    fetchDepth: 3

  - checkout: PipelineTools

  - template: Templates/unity.yaml
    parameters:
      BuildStandalone: true
      BuildUWP: true

- job: DocsBinariesGeneration
  pool: Unity_2021.3.3f1_Pool
  steps:
  - checkout: self

  - checkout: PipelineTools

  - checkout: DocToolUnityProject

  - template: Templates/license-unity.yaml@PipelineTools

  - template: Templates/docs.yaml